"use strict";(self.webpackChunkaide_family_github_io=self.webpackChunkaide_family_github_io||[]).push([[2082],{3645:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>t});const i=JSON.parse('{"id":"quick-start/docker","title":"Docker \u90e8\u7f72","description":"\u672c\u6587\u6863\u4ec5\u9002\u7528\u4e8e Docker \u90e8\u7f72\uff0c\u5176\u4ed6\u90e8\u7f72\u65b9\u5f0f\u8bf7\u53c2\u8003\u5b98\u65b9\u6587\u6863\u3002","source":"@site/docs/1-quick-start/3-docker.md","sourceDirName":"1-quick-start","slug":"/quick-start/docker","permalink":"/docs/quick-start/docker","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/1-quick-start/3-docker.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"\u51c6\u5907\u914d\u7f6e","permalink":"/docs/quick-start/set-config"},"next":{"title":"Kubernetes \u90e8\u7f72","permalink":"/docs/quick-start/k8s"}}');var a=o(4848),s=o(8453);const c={sidebar_position:3},r="Docker \u90e8\u7f72",l={},t=[{value:"\u51c6\u5907\u5de5\u4f5c",id:"\u51c6\u5907\u5de5\u4f5c",level:2},{value:"\u76ee\u5f55\u7ed3\u6784",id:"\u76ee\u5f55\u7ed3\u6784",level:3},{value:"docker-compose",id:"docker-compose",level:3},{value:"\u542f\u52a8\u670d\u52a1",id:"\u542f\u52a8\u670d\u52a1",level:2},{value:"\u67e5\u770b\u670d\u52a1\u72b6\u6001",id:"\u67e5\u770b\u670d\u52a1\u72b6\u6001",level:2},{value:"\u8bbf\u95ee\u670d\u52a1",id:"\u8bbf\u95ee\u670d\u52a1",level:2},{value:"\u67e5\u770b\u670d\u52a1\u65e5\u5fd7",id:"\u67e5\u770b\u670d\u52a1\u65e5\u5fd7",level:2},{value:"\u91cd\u542f\u670d\u52a1",id:"\u91cd\u542f\u670d\u52a1",level:2},{value:"\u505c\u6b62\u670d\u52a1",id:"\u505c\u6b62\u670d\u52a1",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"docker-\u90e8\u7f72",children:"Docker \u90e8\u7f72"})}),"\n",(0,a.jsx)(n.admonition,{title:"\u63d0\u793a",type:"tip",children:(0,a.jsx)(n.p,{children:"\u672c\u6587\u6863\u4ec5\u9002\u7528\u4e8e Docker \u90e8\u7f72\uff0c\u5176\u4ed6\u90e8\u7f72\u65b9\u5f0f\u8bf7\u53c2\u8003\u5b98\u65b9\u6587\u6863\u3002"})}),"\n",(0,a.jsx)(n.h2,{id:"\u51c6\u5907\u5de5\u4f5c",children:"\u51c6\u5907\u5de5\u4f5c"}),"\n",(0,a.jsx)(n.h3,{id:"\u76ee\u5f55\u7ed3\u6784",children:"\u76ee\u5f55\u7ed3\u6784"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"\u2514\u2500\u2500 moon\n    \u251c\u2500\u2500 docker-compose.yaml\n    \u251c\u2500\u2500 houyi\n    \u2502\xa0\xa0 \u2514\u2500\u2500 config.yaml\n    \u251c\u2500\u2500 palace\n    \u2502\xa0\xa0 \u2514\u2500\u2500 config.yaml\n    \u2514\u2500\u2500 rabbit\n        \u2514\u2500\u2500 config.yaml\n"})}),"\n",(0,a.jsx)(n.h3,{id:"docker-compose",children:"docker-compose"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'version: "3.8"\nservices:\n  palace:\n    image:  docker.cloudimages.asia/aidemoonio/palace:latest\n    container_name: moon_palace\n    ports:\n      - "8000:8000"\n      - "9000:9000"\n    volumes:\n      - ./palace:/data/conf\n\n  houyi:\n    image:  docker.cloudimages.asia/aidemoonio/houyi:latest\n    container_name: moon_houyi\n    ports:\n      - "8001:8001"\n      - "9001:9001"\n    volumes:\n      - ./houyi:/data/conf\n\n  rabbit:\n    image: docker.cloudimages.asia/aidemoonio/rabbit:latest\n    container_name: moon_rabbit\n    ports:\n      - "8002:8002"\n      - "9002:9002"\n    volumes:\n      - ./rabbit:/data/conf\n\n  # \u5982\u9700\u4f7f\u7528\u57df\u540d\uff0c\u8bf7\u5c06web\u548cpalace\u89e3\u6790\u5230\u7edf\u4e00\u57df\u540d\u4e0b\uff0c/api\u89e3\u6790\u5230palace\n  web:\n    image: docker.cloudimages.asia/aidemoonio/moon-frontend:latest\n    container_name: web\n    ports:\n      - "5173:80"\n'})}),"\n",(0,a.jsx)(n.h2,{id:"\u542f\u52a8\u670d\u52a1",children:"\u542f\u52a8\u670d\u52a1"}),"\n",(0,a.jsxs)(n.admonition,{title:"\u63d0\u793a",type:"tip",children:[(0,a.jsxs)(n.p,{children:["\u8bf7\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4fee\u6539 ",(0,a.jsx)(n.code,{children:"docker-compose.yaml"})," \u6587\u4ef6\u4e2d\u7684\u955c\u50cf\u540d\u79f0\u548c\u7aef\u53e3\u6620\u5c04\u3002"]}),(0,a.jsx)(n.p,{children:"\u56e0\u4e3a\u524d\u7aef\u670d\u52a1\u548c\u540e\u7aef\u670d\u52a1\u5728\u4e0d\u540c\u7684\u5bb9\u5668\u4e2d\uff0c\u540e\u7aefAPI\u662f\u901a\u8fc7window.location.origin\u83b7\u53d6\u7684\uff0c\u6240\u4ee5\u9ed8\u8ba4\u662f"}),(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.a,{href:"http://localhost:5173",children:"http://localhost:5173"})," => ",(0,a.jsx)(n.a,{href:"http://localhost:8000/api",children:"http://localhost:8000/api"})]}),(0,a.jsx)(n.p,{children:"\u5982\u679c\u9700\u8981\u4f7f\u7528\u57df\u540d\uff0c\u8bf7\u5c06web\u548cpalace\u89e3\u6790\u5230\u7edf\u4e00\u57df\u540d\u4e0b\uff0c/api\u89e3\u6790\u5230palace\u3002"})]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"docker-compose up -d\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u67e5\u770b\u670d\u52a1\u72b6\u6001",children:"\u67e5\u770b\u670d\u52a1\u72b6\u6001"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"docker-compose ps\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u8bbf\u95ee\u670d\u52a1",children:"\u8bbf\u95ee\u670d\u52a1"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\u524d\u7aef\u670d\u52a1\uff1a",(0,a.jsx)(n.a,{href:"http://localhost:5173",children:"http://localhost:5173"})]}),"\n",(0,a.jsxs)(n.li,{children:["\u540e\u7aef\u670d\u52a1\uff1a",(0,a.jsx)(n.a,{href:"http://localhost:8000/api",children:"http://localhost:8000/api"})]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:(0,a.jsx)(n.a,{href:"https://aide-family.github.io/blog/new-strategy",children:"\u521b\u5efa\u544a\u8b66\u7b56\u7565\u5e76\u544a\u8b66"})})}),"\n",(0,a.jsx)(n.h2,{id:"\u67e5\u770b\u670d\u52a1\u65e5\u5fd7",children:"\u67e5\u770b\u670d\u52a1\u65e5\u5fd7"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"docker-compose logs -f [service_name]\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u91cd\u542f\u670d\u52a1",children:"\u91cd\u542f\u670d\u52a1"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"docker-compose restart [service_name]\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u505c\u6b62\u670d\u52a1",children:"\u505c\u6b62\u670d\u52a1"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"docker-compose down\n"})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,n,o)=>{o.d(n,{R:()=>c,x:()=>r});var i=o(6540);const a={},s=i.createContext(a);function c(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:c(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);